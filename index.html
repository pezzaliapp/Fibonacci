<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Spirale Aurea – Fibonacci Style</title>
  <style>
    body {
      background-color: #0000aa;
      color: #00ffff;
      font-family: "Courier New", monospace;
      padding: 10px;
      margin: 0;
      text-align: center;
    }
    canvas {
      background-color: #000033;
      border: 2px solid #00ffff;
      margin-top: 10px;
    }
    h1 {
      color: #00ffff;
      text-transform: uppercase;
    }
  </style>
  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</head>
<body>
  <h1>✨ Spirale Aurea ✨</h1>
  <canvas id="spirale" width="600" height="600"></canvas>

  <script>
    const canvas = document.getElementById('spirale');
    const ctx = canvas.getContext('2d');
    ctx.strokeStyle = '#00ffff';
    ctx.lineWidth = 2;

    let x = 300, y = 300; // centro
    let size = 5;         // lato iniziale
    let angle = 0;        // rotazione
    let step = 0;
    const maxSteps = 12;

    function drawQuarterArc(cx, cy, r, startAngle) {
      ctx.beginPath();
      ctx.arc(cx, cy, r, startAngle, startAngle + Math.PI / 2);
      ctx.stroke();
    }

    function drawNext() {
      if (step >= maxSteps) return;
      let a = size;
      ctx.beginPath();
      switch (step % 4) {
        case 0: // right
          ctx.rect(x, y - a, a, a);
          drawQuarterArc(x + a, y - a, a, Math.PI);
          x += a;
          break;
        case 1: // down
          ctx.rect(x - a, y, a, a);
          drawQuarterArc(x - a, y + a, a, -Math.PI / 2);
          y += a;
          break;
        case 2: // left
          ctx.rect(x - a - a, y - a, a, a);
          drawQuarterArc(x - a, y - a, a, 0);
          x -= a;
          break;
        case 3: // up
          ctx.rect(x - a, y - a - a, a, a);
          drawQuarterArc(x, y - a, a, Math.PI / 2);
          y -= a;
          break;
      }
      ctx.stroke();
      size += a; // incrementa in stile Fibonacci
      step++;
      setTimeout(drawNext, 600);
    }

    drawNext();
  </script>
</body>
</html>
